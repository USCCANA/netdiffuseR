<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Matching Estimators with Network Data — netmatch • netdiffuseR</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Matching Estimators with Network Data — netmatch" />

<meta property="og:description" content="WARNING: This function is still in development and has not been tested throughly.
Following Aral et al. (2009), netmatch computes matching
estimators for network data. The function netmatch_prepare, which
prepares the data to be used with matchit from
the MatchIt package, is called by netmatch." />
<meta name="twitter:card" content="summary" />


<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">netdiffuseR</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">1.19.999</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/analyzing-medical-innovation-data.html">netdiffuseR showcase: Medical Innovations</a>
    </li>
    <li>
      <a href="../articles/introduction-to-netdiffuser.html">Simulating diffusion networks: Using the `rdiffnet` function</a>
    </li>
    <li>
      <a href="../articles/not-lost-in-translation-importing-and-exporting-graphs.html">Not-Lost in translation: Getting diffusion data into netdiffuseR</a>
    </li>
    <li>
      <a href="../articles/time_discount_suscep_infect.html">Time Discounted Infection and Susceptibility</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/USCCANA/netdiffuseR">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Matching Estimators with Network Data</h1>
    <small class="dont-index">Source: <a href='https://github.com/USCCANA/netdiffuseR/blob/master/R/netmatch.r'><code>R/netmatch.r</code></a></small>
    <div class="hidden name"><code>netmatch.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p><strong>WARNING</strong>: This function is still in development and has not been tested throughly.
Following Aral et al. (2009), <code>netmatch</code> computes matching
estimators for network data. The function <code>netmatch_prepare</code>, which
prepares the data to be used with <code><a href='http://www.rdocumentation.org/packages/MatchIt/topics/matchit'>matchit</a></code> from
the <span class="pkg"><a href='http://www.rdocumentation.org/packages/MatchIt/topics/matchit'>MatchIt</a></span> package, is called by <code>netmatch</code>.</p>
    
    </div>

    <pre class="usage"><span class='fu'>netmatch_prepare</span>(<span class='no'>dat</span>, <span class='no'>graph</span>, <span class='no'>timevar</span>, <span class='no'>depvar</span>, <span class='no'>covariates</span>, <span class='kw'>treat_thr</span> <span class='kw'>=</span> <span class='fu'>rep</span>(<span class='fl'>1L</span>,
  <span class='fu'>length</span>(<span class='no'>graph</span>)), <span class='kw'>adopt_thr</span> <span class='kw'>=</span> <span class='fu'>rep</span>(<span class='fl'>1L</span>, <span class='fu'>length</span>(<span class='no'>graph</span>)), <span class='kw'>expo_pcent</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>expo_lag</span> <span class='kw'>=</span> <span class='fl'>0L</span>)

<span class='fu'>netmatch</span>(<span class='no'>dat</span>, <span class='no'>graph</span>, <span class='no'>timevar</span>, <span class='no'>depvar</span>, <span class='no'>covariates</span>, <span class='kw'>treat_thr</span> <span class='kw'>=</span> <span class='fu'>rep</span>(<span class='fl'>1L</span>,
  <span class='fu'>length</span>(<span class='no'>graph</span>)), <span class='kw'>adopt_thr</span> <span class='kw'>=</span> <span class='fu'>rep</span>(<span class='fl'>1L</span>, <span class='fu'>length</span>(<span class='no'>graph</span>)), <span class='kw'>expo_pcent</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>expo_lag</span> <span class='kw'>=</span> <span class='fl'>0L</span>, <span class='no'>...</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>dat</th>
      <td><p><code>data.frame</code> with dynamic data. Must be of
<code>nrow(dat)==nslices(graph)*nnodes(graph)</code>.</p></td>
    </tr>
    <tr>
      <th>graph</th>
      <td><p>List with sparse matrices.</p></td>
    </tr>
    <tr>
      <th>timevar</th>
      <td><p>Character scalar. Name of time variable</p></td>
    </tr>
    <tr>
      <th>depvar</th>
      <td><p>Character scalar. Name of the dependent variable</p></td>
    </tr>
    <tr>
      <th>covariates</th>
      <td><p>Character vector. Name(s) of the control variable(s).</p></td>
    </tr>
    <tr>
      <th>treat_thr</th>
      <td><p>Either a numeric scalar or vector of length <code><a href='nvertices.html'>nslices(graph)</a></code>.
Sets the threshold of <code>exposure</code> at which it is considered that an
observation is treated.</p></td>
    </tr>
    <tr>
      <th>adopt_thr</th>
      <td><p>Either a numeric scalar or vector of length <code><a href='nvertices.html'>nslices(graph)</a></code>.
Sets the threshold of <code>depvar</code> at which it is considered that an observation
has adopted a behavior.</p></td>
    </tr>
    <tr>
      <th>expo_pcent</th>
      <td><p>Logical scalar. When <code>TRUE</code>, exposure is computed
non-normalized (so it is a count rather than a percentage).</p></td>
    </tr>
    <tr>
      <th>expo_lag</th>
      <td><p>Integer scalar. Number of lags to consider when computing
exposure. <code>expo_lag=1</code> defines exposure in T considering behavior and
network at T-1.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Further arguments to be passed to <code><a href='http://www.rdocumentation.org/packages/MatchIt/topics/matchit'>matchit</a></code>.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>In the case of <code>netmatch_prepare</code></p>
<dt>dat</dt><dd><p>A <code>data.frame</code> with the original data (covariates), plus the
following new variables: <code>treat</code>, <code>adopt</code>, <code>exposure</code>.</p></dd>
<dt>match_model</dt><dd><p>A formula to be passed to <code>netmatch</code></p></dd>

netmatch returns the following:
<dt>fATT</dt><dd><p>A numeric vector of length \(N_1\) (number of treated used
in the matching process). Treatment effects on the treated at the individual
level</p></dd>
<dt>match_obj</dt><dd><p>The output from <code>matchit</code>.</p></dd>

    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>In Aral et al. (2009), the matching estimator is used as a response to the
fact that the observed network is homophilous. Essentially, using exposure
as a treatment indicator, which is known to be endogenous, we can apply the
same principle of matching estimators in which, after controlling for characteristics
(covariates), individuals from the treated group (exposed to some behavior)
can be compared to individuals from the control group (not exposed to that
behavior), as the only difference between the two is the exposure.</p>
<p>As pointed out in King &amp; Nielsen (2015), it is suggested that, contrary to
what Aral et al. (2009), the matching is not performed over propensity score
since it is know that the later can increase imbalances in the data and thus
obtaining exactly the opposed outcome that matching based estimators pursue.</p>
<p>A couple of good references for matching estimators are Imbens and Wooldridge
(2009), and Sekhon (2008).</p>
    
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Aral, S., Muchnik, L., &amp; Sundararajan, A. (2009). Distinguishing
influence-based contagion from homophily-driven diffusion in dynamic networks.
Proceedings of the National Academy of Sciences of the United States of America,
106(51), 21544–21549. doi: <a href='http://doi.org/10.1073/pnas.0908800106'>10.1073/pnas.0908800106</a></p>
<p>Imbens, G. W., &amp; Wooldridge, J. M. (2009). Recent Developments in the
Econometrics of Program Evaluation. Journal of Economic Literature, 47(1),
5–86. doi: <a href='http://doi.org/10.1257/jel.47.1.5'>10.1257/jel.47.1.5</a></p>
<p>King, G., &amp; Nielsen, R. (2015). Why Propensity Scores Should Not Be Used for.</p>
<p>Sekhon, J. S. (2008). The Neyman-Rubin Model of Causal Inference and Estimation
Via Matching Methods. The Oxford Handbook of Political Methodology.
doi: <a href='http://doi.org/10.1093/oxfordhb/9780199286546.003.0011'>10.1093/oxfordhb/9780199286546.003.0011</a></p>
    

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>

      <li><a href="#references">References</a></li>
          </ul>

    <h2>Author</h2>
    
George G. Vega Yon

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by George Vega Yon, Thomas Valente.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  

  </body>
</html>

