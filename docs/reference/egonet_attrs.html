<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Retrieve alter's attributes (network effects) — egonet_attrs • netdiffuseR</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Retrieve alter's attributes (network effects) — egonet_attrs" />

<meta property="og:description" content="For a given set of vertices V, retrieves each vertex's alter's
attributes. This function enables users to calculate exposure on variables
other than the attribute that is diffusing.  Further, it enables the
specification of alternative functions to use to characterize ego's
personal network including calculating the mean, maximum, minimum, median, or
sum of the alters' attributes. These measures may be static or dynamic over
the interval of diffusion and they may be binary or valued." />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">netdiffuseR</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">1.20.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/analyzing-medical-innovation-data.html">netdiffuseR showcase: Medical Innovations</a>
    </li>
    <li>
      <a href="../articles/introduction-to-netdiffuser.html">Simulating diffusion networks: Using the `rdiffnet` function</a>
    </li>
    <li>
      <a href="../articles/not-lost-in-translation-importing-and-exporting-graphs.html">Not-Lost in translation: Getting diffusion data into netdiffuseR</a>
    </li>
    <li>
      <a href="../articles/time_discount_suscep_infect.html">Time Discounted Infection and Susceptibility</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/USCCANA/netdiffuseR">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Retrieve alter's attributes (network effects)</h1>
    <small class="dont-index">Source: <a href='https://github.com/USCCANA/netdiffuseR/blob/master/R/egonets.R'><code>R/egonets.R</code></a></small>
    <div class="hidden name"><code>egonet_attrs.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>For a given set of vertices V, retrieves each vertex's alter's
attributes. This function enables users to calculate exposure on variables
other than the attribute that is diffusing.  Further, it enables the
specification of alternative functions to use to characterize ego's
personal network including calculating the mean, maximum, minimum, median, or
sum of the alters' attributes. These measures may be static or dynamic over
the interval of diffusion and they may be binary or valued.</p>
    
    </div>

    <pre class="usage"><span class='fu'>egonet_attrs</span>(<span class='no'>graph</span>, <span class='no'>attrs</span>, <span class='kw'>V</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>direction</span> <span class='kw'>=</span> <span class='st'>"outgoing"</span>,
  <span class='kw'>fun</span> <span class='kw'>=</span> <span class='kw'>function</span>(<span class='no'>x</span>) <span class='no'>x</span>, <span class='kw'>as.df</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>self</span> <span class='kw'>=</span> <span class='fu'>getOption</span>(<span class='st'>"diffnet.self"</span>),
  <span class='kw'>valued</span> <span class='kw'>=</span> <span class='fu'>getOption</span>(<span class='st'>"diffnet.valued"</span>), <span class='no'>...</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>graph</th>
      <td><p>Any class of accepted graph format (see <code><a href='netdiffuseR-graphs.html'>netdiffuseR-graphs</a></code>).</p></td>
    </tr>
    <tr>
      <th>attrs</th>
      <td><p>If <code>graph</code> is static, Numeric matrix with \(n\) rows, otherwise a list of numeric matrices with \(n\) rows.</p></td>
    </tr>
    <tr>
      <th>V</th>
      <td><p>Integer vector. Set of vertices from which the attributes will be retrieved.</p></td>
    </tr>
    <tr>
      <th>direction</th>
      <td><p>Character scalar. Either <code>"outgoing"</code>, <code>"incoming"</code>.</p></td>
    </tr>
    <tr>
      <th>fun</th>
      <td><p>Function. Applied to each</p></td>
    </tr>
    <tr>
      <th>as.df</th>
      <td><p>Logical scalar. When TRUE returns a data.frame instead of a list (see details).</p></td>
    </tr>
    <tr>
      <th>self</th>
      <td><p>Logical scalar. When <code>TRUE</code> autolinks (loops, self edges) are allowed (see details).</p></td>
    </tr>
    <tr>
      <th>valued</th>
      <td><p>Logical scalar. When <code>TRUE</code> weights will be considered. Otherwise non-zero values will be replaced by ones.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Further arguments to be passed to <code>fun</code>.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A list with ego alters's attributes. By default, if the graph is static, the
output is a list of length <code>length(V)</code> with matrices having the following
columns:</p>
<dt>value</dt><dd><p>Either the corresponding value of the tie.</p></dd>
<dt>id</dt><dd><p>Alter's id</p></dd>
<dt>...</dt><dd><p>Further attributes contained in <code>attrs</code></p></dd>

On the other hand, if graph is dynamic, the output is list of length
T of lists of length length(V) with data frames having the following
columns:

<dt>value</dt><dd><p>The corresponding value of the adjacency matrix.</p></dd>
<dt>id</dt><dd><p>Alter's id</p></dd>
<dt>per</dt><dd><p>Time id</p></dd>
<dt>...</dt><dd><p>Further attributes contained in <code>attrs</code></p></dd>

    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>By indexing inner/outer edges, this function retrieves ego network attributes
for all \(v \in V\), which by default is the complete set
of vertices in the graph.</p>
<p>When <code>as.df=TRUE</code> the function returns a data.frame of size
\((|V|\times T)\times k\) where \(T\) is the number of time
periods and \(k\) is the number of columns generated by the function.</p>
<p>The function can be used to create network effects as those in the <span class="pkg">RSiena</span>
package. The difference here is that the definition of the statistic directly
relies on the user. For example, in the <span class="pkg">RSiena</span> package, the dyadic covariate
effect <em>37. covariate (centered) main effect (X)</em></p>
<p>$$%
s_{i37}(x) = \sum_j x_{ij}(w_{ij}-\bar w)
$$</p>
<p>Which, having a diffnet object with attributes named <code>x</code> and <code>w</code>,
can be calculated as</p>
<pre>
    egonet_attrs(diffnet, as.df=TRUE, fun=function(dat) {
     sum(dat[, "x"]*(dat[, "w"] - mean(dat[, "w"])))
    })
    </pre>
    <p>Furthermore, we could use the <em>median</em> centered instead, for example</p>
<pre>
    egonet_attrs(diffnet, as.df=TRUE, fun=function(dat) {
     sum(dat[, "x"]*(dat[, "w"] - median(dat[, "w"])))
    })
    </pre>
    <p>Where for each \(i\), <code>dat</code> will be a matrix with as many rows
as individuals in his egonetwork. Such matrix holds the column names of the
attributes in the network.</p>
<p>When <code>self = TRUE</code>, it will include ego's attributes, regardless
the network has loops or not.</p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p>Other data management functions: <code><a href='diffnet-class.html'>diffnet-class</a></code>,
  <code><a href='edgelist_to_adjmat.html'>edgelist_to_adjmat</a></code>, <code><a href='isolated.html'>isolated</a></code>,
  <code><a href='survey_to_diffnet.html'>survey_to_diffnet</a></code></p></div>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># Simple example with diffnet -----------------------------------------------</span>
<span class='fu'>set.seed</span>(<span class='fl'>1001</span>)
<span class='no'>diffnet</span> <span class='kw'>&lt;-</span> <span class='fu'>rdiffnet</span>(<span class='fl'>150</span>, <span class='fl'>5</span>, <span class='kw'>seed.graph</span><span class='kw'>=</span><span class='st'>"small-world"</span>)

<span class='co'># Adding attributes</span>
<span class='no'>indeg</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='dgr.html'>dgr</a></span>(<span class='no'>diffnet</span>, <span class='kw'>cmode</span><span class='kw'>=</span><span class='st'>"indegree"</span>)
<span class='fu'>head</span>(<span class='no'>indeg</span>)</div><div class='output co'>#&gt;   1 2 3 4 5
#&gt; 1 1 1 2 1 2
#&gt; 2 1 1 1 1 1
#&gt; 3 2 2 2 2 2
#&gt; 4 3 2 4 3 2
#&gt; 5 5 6 4 4 4
#&gt; 6 2 1 2 2 2</div><div class='input'><span class='no'>diffnet</span><span class='kw'>[[</span><span class='st'>"indegree"</span>]] <span class='kw'>&lt;-</span> <span class='no'>indeg</span>

<span class='co'># Retrieving egonet's attributes (vertices 1 and 20)</span>
<span class='fu'>egonet_attrs</span>(<span class='no'>diffnet</span>, <span class='kw'>V</span><span class='kw'>=</span><span class='fu'>c</span>(<span class='fl'>1</span>,<span class='fl'>20</span>))</div><div class='output co'>#&gt; $`1`
#&gt; $`1`$`1`
#&gt;      id value per toa real_threshold indegree
#&gt; 2     2     1   1   1      0.4403595        1
#&gt; 150 150     1   1  NA      0.2051819        2
#&gt; 
#&gt; $`1`$`20`
#&gt;    id value per toa real_threshold indegree
#&gt; 19 19     1   1  NA      0.9835095        2
#&gt; 21 21     1   1  NA      0.9678020        1
#&gt; 
#&gt; 
#&gt; $`2`
#&gt; $`2`$`1`
#&gt;      id value per toa real_threshold indegree
#&gt; 2     2     1   2   1      0.4403595        1
#&gt; 150 150     1   2  NA      0.2051819        2
#&gt; 
#&gt; $`2`$`20`
#&gt;    id value per toa real_threshold indegree
#&gt; 19 19     1   2  NA      0.9835095        3
#&gt; 21 21     1   2  NA      0.9678020        2
#&gt; 
#&gt; 
#&gt; $`3`
#&gt; $`3`$`1`
#&gt;      id value per toa real_threshold indegree
#&gt; 2     2     1   3   1      0.4403595        1
#&gt; 150 150     1   3  NA      0.2051819        2
#&gt; 
#&gt; $`3`$`20`
#&gt;    id value per toa real_threshold indegree
#&gt; 19 19     1   3  NA      0.9835095        3
#&gt; 21 21     1   3  NA      0.9678020        1
#&gt; 
#&gt; 
#&gt; $`4`
#&gt; $`4`$`1`
#&gt;      id value per toa real_threshold indegree
#&gt; 2     2     1   4   1      0.4403595        1
#&gt; 150 150     1   4  NA      0.2051819        2
#&gt; 
#&gt; $`4`$`20`
#&gt;    id value per toa real_threshold indegree
#&gt; 21 21     1   4  NA      0.9678020        1
#&gt; 90 90     1   4  NA      0.5190071        3
#&gt; 
#&gt; 
#&gt; $`5`
#&gt; $`5`$`1`
#&gt;      id value per toa real_threshold indegree
#&gt; 2     2     1   5   1      0.4403595        1
#&gt; 150 150     1   5  NA      0.2051819        1
#&gt; 
#&gt; $`5`$`20`
#&gt;    id value per toa real_threshold indegree
#&gt; 19 19     1   5  NA      0.9835095        2
#&gt; 21 21     1   5  NA      0.9678020        2
#&gt; 
#&gt; </div><div class='input'>
<span class='co'># Example with a static network ---------------------------------------------</span>

<span class='fu'>set.seed</span>(<span class='fl'>1231</span>)
<span class='no'>n</span> <span class='kw'>&lt;-</span> <span class='fl'>20</span>
<span class='no'>net</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='rgraph_ws.html'>rgraph_ws</a></span>(<span class='kw'>n</span> <span class='kw'>=</span> <span class='no'>n</span>, <span class='kw'>k</span> <span class='kw'>=</span> <span class='fl'>4</span>, <span class='kw'>p</span> <span class='kw'>=</span> <span class='fl'>.5</span>)
<span class='no'>someattr</span> <span class='kw'>&lt;-</span> <span class='fu'>matrix</span>(<span class='fu'>rnorm</span>(<span class='no'>n</span> * <span class='fl'>2</span>), <span class='kw'>ncol</span><span class='kw'>=</span> <span class='fl'>2</span>, <span class='kw'>dimnames</span> <span class='kw'>=</span> <span class='fu'>list</span>(<span class='kw'>NULL</span>, <span class='fu'>c</span>(<span class='st'>"a"</span>, <span class='st'>"b"</span>)))

<span class='co'># Maximum of -a- in ego network</span>
<span class='no'>ans</span> <span class='kw'>&lt;-</span> <span class='fu'>egonet_attrs</span>(<span class='no'>net</span>, <span class='no'>someattr</span>, <span class='kw'>fun</span> <span class='kw'>=</span> <span class='kw'>function</span>(<span class='no'>x</span>) <span class='fu'>max</span>(<span class='no'>x</span>[,<span class='st'>"a"</span>]))
<span class='no'>ans</span></div><div class='output co'>#&gt;  [1] -0.8624120  1.2340156  0.3785647  0.5097039  1.6779573  0.2843847
#&gt;  [7]  1.6779573  0.5097039  1.6779573  1.6779573  0.5517721  1.6779573
#&gt; [13]  1.6779573  0.2843847  0.3785647  0.3488837  1.6779573  1.6779573
#&gt; [19]  0.3785647  0.5517721</div><div class='input'>
<span class='co'># checking it worked, taking a look at node 1, 2, and 3</span>
<span class='fu'>max</span>(<span class='no'>someattr</span>[<span class='fu'>which</span>(<span class='no'>net</span>[<span class='fl'>1</span>,] <span class='kw'>==</span> <span class='fl'>1</span>),<span class='st'>"a"</span>]) <span class='kw'>==</span> <span class='no'>ans</span>[<span class='fl'>1</span>] <span class='co'># TRUE</span></div><div class='output co'>#&gt; [1] TRUE</div><div class='input'><span class='fu'>max</span>(<span class='no'>someattr</span>[<span class='fu'>which</span>(<span class='no'>net</span>[<span class='fl'>2</span>,] <span class='kw'>==</span> <span class='fl'>1</span>),<span class='st'>"a"</span>]) <span class='kw'>==</span> <span class='no'>ans</span>[<span class='fl'>2</span>] <span class='co'># TRUE</span></div><div class='output co'>#&gt; [1] TRUE</div><div class='input'><span class='fu'>max</span>(<span class='no'>someattr</span>[<span class='fu'>which</span>(<span class='no'>net</span>[<span class='fl'>3</span>,] <span class='kw'>==</span> <span class='fl'>1</span>),<span class='st'>"a"</span>]) <span class='kw'>==</span> <span class='no'>ans</span>[<span class='fl'>3</span>] <span class='co'># TRUE</span></div><div class='output co'>#&gt; [1] TRUE</div><div class='input'>

</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

    <h2>Author</h2>
    
George G. Vega Yon

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by George Vega Yon, Thomas Valente.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  

  </body>
</html>

